<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/mainLayout}">

<th:block layout:fragment="content">
	<th:block th:replace="@{layout/mainLoadingBar.html} :: loadingBar"></th:block>

	<div id="wrapper">
		<th:block th:replace="@{layout/mainHeader.html} :: header"></th:block>
		<th:block th:replace="@{layout/mainLeftSidebar.html} :: sidebar"></th:block>
		<th:block th:replace="@{layout/contentDataTable.html} :: dataTable"></th:block>

		<div class="content-wrapper">
			<div class="container-fluid">
				<th:block th:replace="@{layout/contentHeader.html} :: contentHeader('Detail','Management','Manage store','','')"></th:block>

				<div class="row">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-body">
								<div class="card-title">Store > Detail</div>
								<hr>
								<form>
									<div class="form-group">
										<input type="hidden" id="put_id" name="id">
									</div>

									<div class="form-group">
										<label for="put_name">Store name</label>
										<input type="text" class="form-control" id="put_name" name="name">
									</div>

									<div class="form-group">
										<label for="put_telNumber">Telephone number</label>
										<input type="text" class="form-control" id="put_telNumber" name="telNumber">
									</div>

									<div class="form-group">
										<label for="put_info">Information</label>
										<textarea rows="4" class="form-control" id="put_info" name="info"></textarea>
									</div>
								</form>

								<div class="form-group">
									<button type="submit" class="btn btn-success" onclick="store.put()"><i class="fa fa-check-square-o"></i>Save</button>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-body">
								<ul class="nav nav-tabs nav-tabs-info nav-justified">
									<li class="nav-item">
										<a class="nav-link active" data-toggle="tab" href="#outer"><i class="icon-home"></i> <span class="hidden-xs">Outer</span></a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#top"><i class="icon-user"></i> <span class="hidden-xs">Top</span></a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#bottom"><i class="icon-envelope-open"></i> <span class="hidden-xs">Bottom</span></a>
									</li>
									<li class="nav-item">
										<a class="nav-link" data-toggle="tab" href="#shoes"><i class="icon-envelope-open"></i> <span class="hidden-xs">Shoes</span></a>
									</li>

<!--									<li class="nav-item dropdown">-->
<!--										<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="javascript:void();"><i class="icon-settings"></i> <span class="hidden-xs">Setting</span></a>-->
<!--										<div class="dropdown-menu">-->
<!--											<a class="dropdown-item" data-toggle="tab" href="#tabe-16">Link 1</a>-->
<!--											<a class="dropdown-item" href="javascript:void();">Link 2</a>-->
<!--											<a class="dropdown-item" href="javascript:void();">Link 3</a>-->
<!--											<a class="dropdown-item" href="javascript:void();">Link 3</a>-->
<!--										</div>-->
<!--									</li>-->
								</ul>

								<!-- Tab panes -->
								<div class="tab-content">
									<div id="outer" class="container tab-pane active">

										<div class="row">
											<div class="col-lg-12">
												<div class="card">
													<div class="card-header">
														<i class="fa fa-table"></i> Item > Outer
													</div>
													<div class="card-body">
														<div class="table-responsive">
															<table id="outerGrid" class="table table-bordered display"></table>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>

									<div id="top" class="container tab-pane fade">

										<div class="row">
											<div class="col-lg-12">
												<div class="card">
													<div class="card-header">
														<i class="fa fa-table"></i> Item > Top
													</div>
													<div class="card-body">
														<div class="table-responsive">
															<table id="topGrid" class="table table-bordered display"></table>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>
									<div id="bottom" class="container tab-pane fade">

										<div class="row">
											<div class="col-lg-12">
												<div class="card">
													<div class="card-header">
														<i class="fa fa-table"></i> Item > bottom
													</div>
													<div class="card-body">
														<div class="table-responsive">
															<table id="bottomGrid" class="table table-bordered display"></table>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>
									<div id="shoes" class="container tab-pane fade">

										<div class="row">
											<div class="col-lg-12">
												<div class="card">
													<div class="card-header">
														<i class="fa fa-table"></i> Item > Shoes
													</div>
													<div class="card-body">
														<div class="table-responsive">
															<table id="shoesGrid" class="table table-bordered display"></table>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>
						</div>

					</div>
				</div>


			</div>
		</div>

<!--		<div class="modal fade" id="post_store">-->
<!--			<div class="modal-dialog modal-custom">-->
<!--				<div class="modal-content slideInUp">-->
<!--					<div class="modal-header">-->
<!--						<h5 class="modal-title"></h5>-->
<!--						<button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--							<span aria-hidden="true">&times;</span>-->
<!--						</button>-->
<!--					</div>-->
<!--					<form id="post_storeForm">-->
<!--						<div class="modal-body">-->
<!--							<div class="form-group">-->
<!--								<label for="post_name">Store name</label>-->
<!--								<input type="text" class="form-control" id="post_name" name="name">-->
<!--							</div>-->

<!--							<div class="form-group">-->
<!--								<label for="post_telNumber">Telephone number</label>-->
<!--								<input type="text" class="form-control" id="post_telNumber" name="telNumber">-->
<!--							</div>-->

<!--							<div class="form-group">-->
<!--								<label for="post_info">Information</label>-->
<!--								<textarea rows="4" class="form-control" id="post_info" name="info"></textarea>-->
<!--							</div>-->
<!--						</div>-->
<!--					</form>-->

<!--					<div class="modal-footer">-->
<!--						<button type="submit" class="btn btn-success" onclick="store.post()"><i class="fa fa-check-square-o"></i>Save</button>-->
<!--					</div>-->
<!--				</div>-->
<!--			</div>-->
<!--		</div>-->

<!--		<div class="modal fade" id="put_store">-->
<!--			<div class="modal-dialog modal-custom">-->
<!--				<div class="modal-content slideInUp">-->
<!--					<div class="modal-header">-->
<!--						<h5 class="modal-title"></h5>-->
<!--						<button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--							<span aria-hidden="true">&times;</span>-->
<!--						</button>-->
<!--					</div>-->
<!--					<form id="put_storeForm">-->
<!--						<div class="modal-body">-->
<!--							<div class="form-group">-->
<!--								<input type="hidden" id="put_id" name="id">-->
<!--							</div>-->

<!--							<div class="form-group">-->
<!--								<label for="put_name">Store name</label>-->
<!--								<input type="text" class="form-control" id="put_name" name="name">-->
<!--							</div>-->

<!--							<div class="form-group">-->
<!--								<label for="put_telNumber">Telephone number</label>-->
<!--								<input type="text" class="form-control" id="put_telNumber" name="telNumber">-->
<!--							</div>-->

<!--							<div class="form-group">-->
<!--								<label for="put_info">Information</label>-->
<!--								<textarea rows="4" class="form-control" id="put_info" name="info"></textarea>-->
<!--							</div>-->

<!--							<div class="row">-->
<!--								<div class="col-lg-12">-->
<!--									<div class="card">-->
<!--										<div class="card-header">-->
<!--											<i class="fa fa-table"></i> Store > Item-->
<!--										</div>-->
<!--										<div class="card-body">-->
<!--											<div class="table-responsive">-->
<!--												<table id="itemGrid" class="table table-bordered display modal-grid">-->

<!--												</table>-->
<!--											</div>-->
<!--										</div>-->
<!--									</div>-->
<!--								</div>-->
<!--							</div>-->
<!--						</div>-->
<!--					</form>-->

<!--					<div class="modal-footer">-->
<!--						<button type="submit" class="btn btn-success" onclick="store.put()"><i class="fa fa-check-square-o"></i>Save</button>-->
<!--					</div>-->
<!--				</div>-->
<!--			</div>-->
<!--		</div>-->

		<th:block th:replace="@{layout/mainFooter.html} :: footer"></th:block>
		<th:block th:replace="@{layout/mainRightSidebar.html} :: sidebar"></th:block>
	</div>
</th:block>

<th:block layout:fragment="customScript">
	<script th:inline="javascript" type="text/javascript">
		$(document).ready(function () {
			store.initGrid();
			store.getGridData();

			outer.initGrid();
			top.initGrid();
			bottom.initGrid();
			shoes.initGrid();
		});

		var store = {
			gridId: "storeGrid",
			gridTarget: function () {
				return $("#" + store.gridId).DataTable();
			},
			initGrid: function () {
				$("#"+store.gridId).DataTable({
					dom: 'Bftrip',
					columns: [
						{title: 'Store name', 			data: 'name', 			width: "20%"},
						{title: 'Telephone Number', 	data: 'telNumber', 		width: "30%"},
						{title: 'Information', 			data: 'info', 			width: "40%"},
					],
					data: [],
					select: {
						style: 'multi',
					},
					buttons: [
						{
							text: '<i class="fa fa-check-square"></i>',
							action: function () {
								var _selectedRows = store.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length > 0) store.gridTarget().rows().deselect();
								else store.gridTarget().rows().select();
							}
						},
						{
							text: '<i class="fa fa-plus"></i>',
							action: function () {
								$("#post_store").modal("show");
							},
						},
						{
							text: '<i class="fa fa-edit"></i>',
							action: function () {
								var _selectedRows = store.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									lozm.func.alertRowIsSelected();
									return;
								} else if(_selectedRows.length > 1) {
									lozm.func.alertRowsAreSelected();
									return;
								}

								lozm.func.setDetail("put_", _selectedRows[0]);

								// item.gridTarget().clear().draw();
								// item.getGridData(_selectedRows[0].id);

								$("#put_store").modal("show");
							},
						},
						{
							text: '<i class="fa fa-minus"></i>',
							action: function () {
								var _selectedRows = store.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									lozm.func.alertRowIsSelected();
									return;
								}

								if(confirm("Are you sure to delete the data?")) store.delete(_selectedRows);
							},
						},
						{
							extend: "csv",
							text: '<i class="fa fa-download"></i>',
							charset: 'UTF-16LE',
						},
						{
							extend: "excel",
							text: '<i class="fa fa-file-excel-o"></i>',
							charset: 'UTF-16LE',
						}
					],
				});
			},
			getGridData: function () {
				lozm.func.requestGet({
					url: /*[[ @{/api/store} ]]*/ "",
					callback: {
						success: function (result) {
							if(result.success) {
								store.gridTarget().clear().draw();
								store.gridTarget().rows.add(result.data.list).draw();
							}
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			post: function () {
				lozm.func.requestPost({
					url: /*[[ @{/api/store} ]]*/ "",
					data: {
						name: $("#post_name").val(),
						telNumber: $("#post_telNumber").val(),
						info: $("#post_info").val()
					},
					callback: {
						success: function (result) {
							if(result.success) {
								lozm.func.alertSuccess();
								store.getGridData();
							} else {
								lozm.func.alertFail();
							}
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			put: function () {
				lozm.func.requestPut({
					url: /*[[ @{/api/store} ]]*/ "",
					data: {
						id: $("#put_id").val(),
						name: $("#put_name").val(),
						telNumber: $("#put_telNumber").val(),
						info: $("#put_info").val()
					},
					callback: {
						success: function (result) {
							if(result.success) {
								lozm.func.alertSuccess();
								store.getGridData();
							} else {
								lozm.func.alertFail();
							}
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			delete: function (list) {
				lozm.func.requestDelete({
					url: /*[[ @{/api/store} ]]*/ "",
					data: {
						list: list
					},
					callback: {
						success: function (result) {
							if(result.success) {
								lozm.func.alertSuccess();
								store.getGridData();
							} else {
								lozm.func.alertFail();
							}
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
		};

		var outer = {
			gridId: "outerGrid",
			gridTarget: function () {
				return $("#" + outer.gridId).DataTable();
			},
			initGrid: function () {
				$("#"+outer.gridId).DataTable({
					dom: 'Bftrip',
					columns: [
						{title: 'id',       data: 'id',         visible: false},
						{title: 'name',     data: 'name',       width: "30%"},
						{title: 'contents', data: 'contents',   width: "40%"},
						{title: 'price',    data: 'price',      width: "10%"},
						{title: 'size',     data: 'size',       width: "10%"},
						{title: 'quantity', data: 'quantity',   width: "10%"},
					],
					data: /*[[ ${outerList} ]]*/ "",
					select: {
						style: 'multi',
					},
					buttons: [
						{
							text: '<i class="fa fa-check-square"></i>',
							action: function () {
								var _selectedRows = outer.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length > 0) outer.gridTarget().rows().deselect();
								else outer.gridTarget().rows().select();
							}
						},
						{
							text: '<i class="fa fa-plus"></i>',
							action: function () {
								$("#post_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-edit"></i>',
							action: function () {
								var _selectedRows = outer.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								} else if(_selectedRows.length > 1) {
									alert("Cannot select more then one row.");
									return;
								}

								console.log(_selectedRows);
								lozm.func.setDetail("put_shoes_", _selectedRows[0]);
								$("#put_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-minus"></i>',
							action: function () {
								var _selectedRows = outer.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								}
								if(confirm("Are you sure to delete the data?")) console.log("Deleted.");
							},
						},
						{
							extend: "csv",
							text: '<i class="fa fa-download"></i>',
							charset: 'UTF-16LE',
						},
						{
							extend: "excel",
							text: '<i class="fa fa-file-excel-o"></i>',
							charset: 'UTF-16LE',
						}
					],
				});
			},
			getGridData: function (storeId) {
				lozm.func.requestGet({
					url: "/api/outer."+storeId,
					callback: {
						success: function(result) {
							console.log(result);
							if(result.success === true) {
								outer.gridTarget().clear().draw();
								outer.gridTarget().rows.add(result.data.list).draw();
							} else {
								lozm.func.alertFail();
							}
						},
						error: function(xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			post: function () {
				lozm.func.requestPost({
					url: "/api/item",
					data: {
						name: $("#post_shoes_name").val(),
						price: $("#post_shoes_price").val(),
						quantity: $("#post_shoes_quantity").val(),
						contents: $("#post_shoes_contents").val(),
						size: $("#post_shoes_size").val(),
						type: "SHOES"
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#post_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			put: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						name: $("#put_shoes_name").val(),
						price: $("#put_shoes_price").val(),
						quantity: $("#put_shoes_quantity").val(),
						contents: $("#put_shoes_contents").val(),
						size: $("#put_shoes_size").val()
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			delete: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						flag: 0
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
		};

		var top = {
			gridId: "topGrid",
			gridTarget: function () {
				return $("#" + top.gridId).DataTable();
			},
			initGrid: function () {
				$("#"+top.gridId).DataTable({
					dom: 'Bftrip',
					columns: [
						{title: 'id',       data: 'id',         visible: false},
						{title: 'name',     data: 'name',       width: "30%"},
						{title: 'contents', data: 'contents',   width: "40%"},
						{title: 'price',    data: 'price',      width: "10%"},
						{title: 'size',     data: 'size',       width: "10%"},
						{title: 'quantity', data: 'quantity',   width: "10%"},
					],
					data: /*[[ ${topList} ]]*/ "",
					select: {
						style: 'multi',
					},
					buttons: [
						{
							text: '<i class="fa fa-check-square"></i>',
							action: function () {
								var _selectedRows = top.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length > 0) top.gridTarget().rows().deselect();
								else top.gridTarget().rows().select();
							}
						},
						{
							text: '<i class="fa fa-plus"></i>',
							action: function () {
								$("#post_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-edit"></i>',
							action: function () {
								var _selectedRows = top.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								} else if(_selectedRows.length > 1) {
									alert("Cannot select more then one row.");
									return;
								}

								console.log(_selectedRows);
								lozm.func.setDetail("put_shoes_", _selectedRows[0]);
								$("#put_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-minus"></i>',
							action: function () {
								var _selectedRows = top.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								}
								if(confirm("Are you sure to delete the data?")) console.log("Deleted.");
							},
						},
						{
							extend: "csv",
							text: '<i class="fa fa-download"></i>',
							charset: 'UTF-16LE',
						},
						{
							extend: "excel",
							text: '<i class="fa fa-file-excel-o"></i>',
							charset: 'UTF-16LE',
						}
					],
				});
			},
			getGridData: function (storeId) {
				lozm.func.requestGet({
					url: "/api/top."+storeId,
					callback: {
						success: function(result) {
							console.log(result);
							if(result.success === true) {
								top.gridTarget().clear().draw();
								top.gridTarget().rows.add(result.data.list).draw();
							} else {
								lozm.func.alertFail();
							}
						},
						error: function(xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			post: function () {
				lozm.func.requestPost({
					url: "/api/item",
					data: {
						name: $("#post_shoes_name").val(),
						price: $("#post_shoes_price").val(),
						quantity: $("#post_shoes_quantity").val(),
						contents: $("#post_shoes_contents").val(),
						size: $("#post_shoes_size").val(),
						type: "SHOES"
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#post_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			put: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						name: $("#put_shoes_name").val(),
						price: $("#put_shoes_price").val(),
						quantity: $("#put_shoes_quantity").val(),
						contents: $("#put_shoes_contents").val(),
						size: $("#put_shoes_size").val()
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			delete: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						flag: 0
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
		};

		var bottom = {
			gridId: "bottomGrid",
			gridTarget: function () {
				return $("#" + bottom.gridId).DataTable();
			},
			initGrid: function () {
				$("#"+bottom.gridId).DataTable({
					dom: 'Bftrip',
					columns: [
						{title: 'id',       data: 'id',         visible: false},
						{title: 'name',     data: 'name',       width: "30%"},
						{title: 'contents', data: 'contents',   width: "40%"},
						{title: 'price',    data: 'price',      width: "10%"},
						{title: 'size',     data: 'size',       width: "10%"},
						{title: 'quantity', data: 'quantity',   width: "10%"},
					],
					data: /*[[ ${bottomList} ]]*/ "",
					select: {
						style: 'multi',
					},
					buttons: [
						{
							text: '<i class="fa fa-check-square"></i>',
							action: function () {
								var _selectedRows = bottom.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length > 0) bottom.gridTarget().rows().deselect();
								else bottom.gridTarget().rows().select();
							}
						},
						{
							text: '<i class="fa fa-plus"></i>',
							action: function () {
								$("#post_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-edit"></i>',
							action: function () {
								var _selectedRows = bottom.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								} else if(_selectedRows.length > 1) {
									alert("Cannot select more then one row.");
									return;
								}

								console.log(_selectedRows);
								lozm.func.setDetail("put_shoes_", _selectedRows[0]);
								$("#put_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-minus"></i>',
							action: function () {
								var _selectedRows = bottom.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								}
								if(confirm("Are you sure to delete the data?")) console.log("Deleted.");
							},
						},
						{
							extend: "csv",
							text: '<i class="fa fa-download"></i>',
							charset: 'UTF-16LE',
						},
						{
							extend: "excel",
							text: '<i class="fa fa-file-excel-o"></i>',
							charset: 'UTF-16LE',
						}
					],
				});
			},
			getGridData: function (storeId) {
				lozm.func.requestGet({
					url: "/api/bottom."+storeId,
					callback: {
						success: function(result) {
							console.log(result);
							if(result.success === true) {
								bottom.gridTarget().clear().draw();
								bottom.gridTarget().rows.add(result.data.list).draw();
							} else {
								lozm.func.alertFail();
							}
						},
						error: function(xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			post: function () {
				lozm.func.requestPost({
					url: "/api/item",
					data: {
						name: $("#post_shoes_name").val(),
						price: $("#post_shoes_price").val(),
						quantity: $("#post_shoes_quantity").val(),
						contents: $("#post_shoes_contents").val(),
						size: $("#post_shoes_size").val(),
						type: "SHOES"
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#post_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			put: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						name: $("#put_shoes_name").val(),
						price: $("#put_shoes_price").val(),
						quantity: $("#put_shoes_quantity").val(),
						contents: $("#put_shoes_contents").val(),
						size: $("#put_shoes_size").val()
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			delete: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						flag: 0
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
		};

		var shoes = {
			gridId: "shoesGrid",
			gridTarget: function () {
				return $("#" + shoes.gridId).DataTable();
			},
			initGrid: function () {
				$("#"+shoes.gridId).DataTable({
					dom: 'Bftrip',
					columns: [
						{title: 'id',       data: 'id',         visible: false},
						{title: 'name',     data: 'name',       width: "30%"},
						{title: 'contents', data: 'contents',   width: "40%"},
						{title: 'price',    data: 'price',      width: "10%"},
						{title: 'size',     data: 'size',       width: "10%"},
						{title: 'quantity', data: 'quantity',   width: "10%"},
					],
					data: /*[[ ${shoesList} ]]*/ "",
					select: {
						style: 'multi',
					},
					buttons: [
						{
							text: '<i class="fa fa-check-square"></i>',
							action: function () {
								var _selectedRows = shoes.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length > 0) shoes.gridTarget().rows().deselect();
								else shoes.gridTarget().rows().select();
							}
						},
						{
							text: '<i class="fa fa-plus"></i>',
							action: function () {
								$("#post_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-edit"></i>',
							action: function () {
								var _selectedRows = shoes.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								} else if(_selectedRows.length > 1) {
									alert("Cannot select more then one row.");
									return;
								}

								console.log(_selectedRows);
								lozm.func.setDetail("put_shoes_", _selectedRows[0]);
								$("#put_shoes").modal("show");
							},
						},
						{
							text: '<i class="fa fa-minus"></i>',
							action: function () {
								var _selectedRows = shoes.gridTarget().rows({selected: true}).data().toArray();
								if(_selectedRows.length < 1) {
									alert("At least select one row.");
									return;
								}
								if(confirm("Are you sure to delete the data?")) console.log("Deleted.");
							},
						},
						{
							extend: "csv",
							text: '<i class="fa fa-download"></i>',
							charset: 'UTF-16LE',
						},
						{
							extend: "excel",
							text: '<i class="fa fa-file-excel-o"></i>',
							charset: 'UTF-16LE',
						}
					],
				});
			},
			getGridData: function (storeId) {
				lozm.func.requestGet({
					url: "/api/shoes."+storeId,
					callback: {
						success: function(result) {
							console.log(result);
							if(result.success === true) {
								shoes.gridTarget().clear().draw();
								shoes.gridTarget().rows.add(result.data.list).draw();
							} else {
								lozm.func.alertFail();
							}
						},
						error: function(xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			post: function () {
				lozm.func.requestPost({
					url: "/api/item",
					data: {
						name: $("#post_shoes_name").val(),
						price: $("#post_shoes_price").val(),
						quantity: $("#post_shoes_quantity").val(),
						contents: $("#post_shoes_contents").val(),
						size: $("#post_shoes_size").val(),
						type: "SHOES"
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#post_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			put: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						name: $("#put_shoes_name").val(),
						price: $("#put_shoes_price").val(),
						quantity: $("#put_shoes_quantity").val(),
						contents: $("#put_shoes_contents").val(),
						size: $("#put_shoes_size").val()
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
			delete: function () {
				lozm.func.requestPut({
					url: "/api/item",
					data: {
						id: $("#put_shoes_id").val(),
						flag: 0
					},
					callback: {
						success: function (result) {
							console.log(result);
							item.getGridData();
							$("#put_shoesForm input textarea").clear();
						},
						error: function (xhr, status, error) {
							console.log(xhr);
							console.log(status);
							console.log(error);
						}
					}
				});
			},
		};

	</script>
</th:block>
</html>
